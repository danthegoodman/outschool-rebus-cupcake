{"version":3,"sources":["component/RebusPuzzle.tsx","pages/Manage.tsx","util/fetch.ts","img/CW-logo-2021-NAVY.png","pages/Start.tsx","pages/Play.tsx","App.tsx","util/auth.ts","reportWebVitals.ts","index.tsx"],"names":["RebusPuzzle","puzzle","parts","items","regex","lastEnd","match","exec","shortName","image","getEmojiUrl","index","push","text","slice","lastIndex","length","parseRebus","map","it","ndx","src","alt","title","className","emojiCustom","emojiApple","ManageView","Row","xs","Col","Jumbotron","RebusList","RebusInput","to","path","useState","error","setError","undefined","data","setData","useEffect","fetch","then","res","json","useGet","del","useCallback","body","method","JSON","stringify","useDelete","message","RebusTable","puzzles","onDelete","rebus","Table","RebusRow","solution","contributor","hint","replace","onClick","style","color","cursor","post","usePost","setPuzzle","setSolution","setHint","display","flexDirection","alignItems","FormGroup","Label","Input","value","onChange","e","currentTarget","marginLeft","marginRight","marginTop","marginBottom","placeholder","Button","StartMenu","navyLogo","tag","Link","href","PlayPage","gameId","useParams","PlayGame","Date","getTime","props","guesses","setGuesses","useFetch","encodeURIComponent","get","loading","hackingDetected","setHackingDetected","doSave","flushedGuesses","a","newData","useAutosave","onSave","interval","doMarkHacker","arg","hacker","devtools","isOpen","fn","event","detail","window","addEventListener","removeEventListener","guess","soln","solutions","backgroundColor","toLowerCase","onInput","handleInput","prev","next","target","renderRow","AppRoot","userData","Container","fluid","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","jwtCookie","document","cookie","split","find","startsWith","parse","atob","email","picture","getUserData","location","assign","ReactDOM","render","StrictMode","App","getElementById"],"mappings":"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","file":"static/js/main.5925b4b1.chunk.js","sourcesContent":["import React from \"react\";\nimport emojiApple from '../static/emoji-apple.json';\nimport emojiCustom from '../static/emoji-custom.json';\n\nexport function RebusPuzzle({puzzle}: {puzzle: string}){\n  const parts = parseRebus(puzzle).map((it, ndx) =>\n    \"text\" in it ? (\n      <span key={ndx}>{it.text}</span>\n    ) : (\n      <img key={ndx} src={it.image} alt={it.shortName} title={it.shortName}/>\n    )\n  );\n\n  return (<p className=\"rebus\" title={puzzle}>{parts}</p>)\n}\n\ntype RebusDatum = { text: string } | { image: string; shortName: string };\n\nfunction parseRebus(puzzle: string): RebusDatum[] {\n  let items: RebusDatum[] = [];\n\n  const regex = /:([^:]+):/g;\n  let lastEnd = 0;\n  while (true) {\n    const match = regex.exec(puzzle);\n    if (!match) break;\n\n    const shortName = match[1];\n    const image = getEmojiUrl(shortName);\n    if (!image) continue;\n\n    if (match.index !== lastEnd) {\n      items.push({text: puzzle.slice(lastEnd, match.index)});\n    }\n    items.push({image, shortName})\n    lastEnd = regex.lastIndex;\n  }\n  if (lastEnd !== puzzle.length) {\n    items.push({text: puzzle.slice(lastEnd)});\n  }\n\n  return items;\n}\n\n\n\nexport function getEmojiUrl(shortName: string): string | undefined {\n  //@ts-ignore these are lookup maps, not strongly typed json objects\n  return emojiCustom[shortName] ?? emojiApple[shortName];\n}\n\n\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Col,\n  Jumbotron,\n  Row,\n  Input,\n  Button,\n  FormGroup,\n  Label,\n  Table,\n} from \"reactstrap\";\nimport { useGet, useDelete, usePost } from \"../util/fetch\";\nimport { RebusPuzzle } from \"../component/RebusPuzzle\";\n\nexport default function ManageView() {\n  return (\n    <>\n      <Row className=\"py-4 mx-2 mt-4\" xs={2}>\n        <Col xs={2} />\n        <Col className=\"px-4 mx-2 text-center\" xs={8}>\n          <h1>Outschool Rebus Puzzles: Management</h1>\n        </Col>\n        <Col xs={2} />\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col>\n          <Jumbotron className=\"m-4 p-4 bg-mango rounded\">\n            <RebusList />\n            <hr />\n            <RebusInput />\n          </Jumbotron>\n        </Col>\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col className=\"px-4 mx-2\">\n          <Link className=\"btn btn-secondary\" to=\"/start\">\n            Back to Start Page\n          </Link>\n        </Col>\n      </Row>\n    </>\n  );\n}\n\ntype IRebus = {\n  puzzle: string;\n  solution: string;\n  hint?: string;\n  contributor: string;\n};\n\nfunction RebusList() {\n  const { data, error } = useGet<IRebus[]>(\"/api/rebus\");\n  const { del } = useDelete(\"/api/rebus\");\n\n  function handleDelete(rebus: IRebus) {\n    del({ puzzle: rebus.puzzle });\n  }\n\n  if (error) return <div>Error: {error.message ?? error}</div>;\n  if (!data) return <div>Loading...</div>;\n\n  return <RebusTable puzzles={data} onDelete={handleDelete} />;\n}\n\nfunction RebusTable({\n  puzzles,\n  onDelete,\n}: {\n  puzzles: IRebus[];\n  onDelete?: (rebus: IRebus) => void;\n}) {\n  return (\n    <Table>\n      <thead>\n        <tr>\n          <th>Rebus</th>\n          <th>Solution</th>\n          <th>Hint</th>\n          {!!onDelete && <th>Owner</th>}\n        </tr>\n      </thead>\n      <tbody>\n        {puzzles.map((it) => (\n          <RebusRow key={it.puzzle} rebus={it} onDelete={onDelete} />\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n\nfunction RebusRow({\n  rebus,\n  onDelete,\n}: {\n  rebus: IRebus;\n  onDelete?: (rebus: IRebus) => void;\n}) {\n  function handleDelete() {\n    onDelete && onDelete(rebus);\n  }\n\n  return (\n    <tr>\n      <td>\n        <RebusPuzzle puzzle={rebus.puzzle} />\n      </td>\n      <td>{rebus.solution}</td>\n      <td title={rebus.contributor}>{rebus.hint ? rebus.hint : \"No hints!\"}</td>\n      {onDelete && (\n        <>\n          <td title={rebus.contributor}>\n            {rebus.contributor.replace(\"@outschool.com\", \"\")}\n          </td>\n          <td>\n            <span\n              onClick={handleDelete}\n              style={{ color: \"red\", cursor: \"pointer\" }}\n            >\n              X\n            </span>\n          </td>\n        </>\n      )}\n    </tr>\n  );\n}\n\nfunction RebusInput() {\n  const { post } = usePost<IRebus[]>(\"/api/rebus\");\n  const [puzzle, setPuzzle] = useState(\"\");\n  const [solution, setSolution] = useState(\"\");\n  const [hint, setHint] = useState(\"\");\n\n  function handlePuzzleChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    setPuzzle(e.currentTarget.value);\n  }\n\n  function handleSolutionChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    setSolution(e.currentTarget.value);\n  }\n\n  function handleHintChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    setHint(e.currentTarget.value);\n  }\n\n  function handleSave() {\n    post({ puzzle, solution, hint });\n  }\n\n  return (\n    <div>\n      {(puzzle.length > 0 || solution.length > 0) && (\n        <RebusTable\n          puzzles={[{ puzzle, solution, hint, contributor: \"you!\" }]}\n        />\n      )}\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"flex-end\",\n        }}\n      >\n        <FormGroup>\n          <Label>Puzzle</Label>\n          <Input value={puzzle} onChange={handlePuzzleChange} />\n        </FormGroup>\n        <div\n          style={{\n            marginLeft: \"10px\",\n            marginRight: \"10px\",\n            marginTop: \"auto\",\n            marginBottom: \"10px\",\n          }}\n        >\n          =\n        </div>\n        <FormGroup>\n          <Label>Solution</Label>\n          <Input\n            value={solution}\n            onChange={handleSolutionChange}\n            placeholder=\"Larry\"\n          />\n        </FormGroup>\n        <FormGroup style={{ marginLeft: \"20px\" }}>\n          <Label>Hint</Label>\n          <Input\n            value={hint}\n            onChange={handleHintChange}\n            placeholder=\"Learner Pod\"\n          />\n        </FormGroup>\n        <Button\n          style={{ marginTop: \"auto\", marginLeft: \"20px\" }}\n          onClick={handleSave}\n        >\n          Save\n        </Button>\n      </div>\n    </div>\n  );\n}\n","import {useCallback, useEffect, useState} from \"react\";\n\nexport function useGet<TData>(path: string) {\n  const [error, setError] = useState<Error | null>(null);\n  const [data, setData] = useState<TData | undefined>(undefined);\n\n  useEffect(() => {\n    fetch(path)\n      .then((res) => res.json())\n      .then(setData, setError);\n  }, [path]);\n\n  return { data, error } as const;\n}\n\nexport function usePost<TData>(path: string) {\n  const [error, setError] = useState<Error | null>(null);\n  const [data, setData] = useState<TData | undefined>(undefined);\n\n  const post = useCallback(\n    (body) => {\n      fetch(path, { method: \"POST\", body: JSON.stringify(body) })\n        .then((res) => res.json())\n        .then(setData, setError);\n    },\n    [path]\n  );\n\n  return { data, error, post } as const;\n}\n\nexport function useDelete(path: string) {\n  const [error, setError] = useState<Error | null>(null);\n\n  const del = useCallback(\n    (body) => {\n      fetch(path, { method: \"DELETE\", body: JSON.stringify(body) })\n        .then((res) => res.json())\n        .then(() => {}, setError);\n    },\n    [path]\n  );\n\n  return { error, del } as const;\n}\n","export default __webpack_public_path__ + \"static/media/CW-logo-2021-NAVY.1aaec414.png\";","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Button, Col, Jumbotron, Row } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport navyLogo from \"../img/CW-logo-2021-NAVY.png\";\n\nexport default function StartMenu() {\n  return (\n    <>\n      <Row className=\"py-4 mx-2\" xs={3}>\n        <Col xs={4} />\n        <Col className=\"px-4 mx-2\" xs={4}>\n          <img\n            className=\"img-fluid\"\n            src={navyLogo}\n            alt=\"Cupcake Week 2021 boombox logo\"\n          />\n        </Col>\n        <Col xs={4} />\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col>\n          <Jumbotron className=\"m-4 p-4 bg-mango rounded\">\n            <h1>Outschool Rebus Puzzles</h1>\n            <p className=\"lead\">\n              Challenge your friends and coworkers to some good-natured\n              competition.\n            </p>\n            <hr className=\"my-2\" />\n            <p>Start a game below</p>\n            <p className=\"lead\">\n              <Button tag={Link} color=\"primary\" to=\"/play\">\n                Play!\n              </Button>\n            </p>\n\n            <p>Or add/delete rebus puzzles:</p>\n            <p className=\"lead\">\n              <Button tag={Link} color=\"primary\" to=\"/manage\">\n                Manage!\n              </Button>\n            </p>\n          </Jumbotron>\n        </Col>\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col className=\"px-4 mx-2 float-sm-right\" xs={2}>\n          <Button className=\"btn-blurple\" href=\"/auth/logout\">\n            Logout\n          </Button>\n        </Col>\n      </Row>\n    </>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Link, Redirect, useParams } from \"react-router-dom\";\nimport { Button, Col, Jumbotron, Row } from \"reactstrap\";\nimport { RebusPuzzle } from \"../component/RebusPuzzle\";\nimport useFetch from \"use-http\";\nimport { useAutosave } from \"react-autosave\";\nimport devtools from \"devtools-detect\";\nexport default function PlayPage() {\n  const { gameId } = useParams<{ gameId?: string }>();\n  if (!gameId) {\n    return <Redirect to={`/play/${new Date().getTime()}`} />;\n  }\n\n  return (\n    <>\n      <Row className=\"py-4 mx-2 mt-4\" xs={2}>\n        <Col xs={2} />\n        <Col className=\"px-4 mx-2 text-center \" xs={8}>\n          <h1 className=\"blurple\">Outschool Rebus Puzzles: Play!</h1>\n        </Col>\n        <Col xs={2} />\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col>\n          <Jumbotron className=\"m-4 p-4 bg-mango rounded\">\n            <PlayGame gameId={gameId} />\n          </Jumbotron>\n        </Col>\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col className=\"px-4 mx-2\">\n          <Link className=\"btn btn-secondary\" to=\"/start\">\n            Back to Start Page\n          </Link>\n        </Col>\n      </Row>\n    </>\n  );\n}\nconst IS_DEVMODE =\n  !process.env.NODE_ENV || process.env.NODE_ENV === \"development\";\n\ntype GameData = {\n  id: string;\n  email: string;\n  puzzles: string[];\n  solutions: string[];\n  guesses: string[];\n  hacker: boolean;\n};\nfunction PlayGame(props: { gameId: string }) {\n  const [guesses, setGuesses] = useState<string[]>([]);\n  const { get, post, data, loading, error } = useFetch<GameData>(\n    `/api/game?id=${encodeURIComponent(props.gameId)}`\n  );\n  const [hackingDetected, setHackingDetected] = useState(false);\n\n  const doSave = useCallback(\n    async (flushedGuesses: string[]) => {\n      if (!flushedGuesses.length) return;\n      if (JSON.stringify(data?.guesses) === JSON.stringify(flushedGuesses))\n        return;\n\n      const newData = { ...data };\n      newData.guesses = flushedGuesses;\n      return post(newData);\n    },\n    [post, data]\n  );\n  useAutosave({ data: guesses, onSave: doSave, interval: 3000 });\n\n  const doMarkHacker = useCallback(\n    (arg?: boolean) => {\n      if (!arg && IS_DEVMODE) {\n        console.log(\n          \"you would have been marked a hacker, but this is development. You can call DO_MARK_HACKER from here to trigger this anyway.\"\n        );\n        return;\n      }\n      setHackingDetected(true);\n      const newData = { ...data };\n      newData.hacker = true;\n      post(newData);\n    },\n    [post, data]\n  );\n  useEffect(() => {\n    get();\n  }, []);\n  useEffect(() => {\n    if (!data) return;\n    if (IS_DEVMODE) {\n      (window as any).DO_MARK_HACKER = () => doMarkHacker(true);\n    }\n    setGuesses(data.guesses);\n    setHackingDetected(data.hacker);\n    if (!data.hacker && devtools.isOpen) {\n      doMarkHacker();\n    }\n  }, [data, doMarkHacker]);\n\n  useEffect(() => {\n    let fn = (event: any) => {\n      if (event.detail.isOpen) {\n        doMarkHacker();\n      }\n    };\n    window.addEventListener(\"devtoolschange\", fn);\n    return () => {\n      window.removeEventListener(\"devtoolschange\", fn);\n    };\n  }, [data, doMarkHacker]);\n\n  if (hackingDetected) {\n    return (\n      <div>\n        <p>\n          <img src=\"/mrresetti.png\" />\n        </p>\n        <p>NO! YOU CANNOT USE THE DEVTOOLS HERE! YOUR GAME IS NULL AND VOID.</p>\n      </div>\n    );\n  }\n\n  if (error) return <div>{error.message ?? error}</div>;\n  if (!data) return <div>Loading...</div>;\n\n  //TODO loading image when saving or when needing to save?\n  return (\n    <div className=\"mx-2 px-2\">\n      <table>\n        <thead>\n          <tr>\n            <th>Rebus</th>\n            <th>Your Guess</th>\n          </tr>\n        </thead>\n        <tbody>{data.puzzles.map((it, ndx) => renderRow(ndx))}</tbody>\n      </table>\n    </div>\n  );\n\n  function renderRow(index: number) {\n    const puzzle = data?.puzzles[index] ?? \"\";\n    const guess = guesses?.[index] ?? \"\";\n    const soln = data?.solutions[index] ?? \"\";\n\n    const backgroundColor =\n      guess.length === 0\n        ? \"#FFF\"\n        : soln.toLowerCase() === guess.toLowerCase()\n        ? \"#0F0\"\n        : \"#F44\";\n\n    return (\n      <tr key={puzzle}>\n        <td>\n          <RebusPuzzle puzzle={puzzle} />\n        </td>\n        <td>\n          <input\n            value={guess}\n            onInput={handleInput}\n            style={{ backgroundColor }}\n          />\n        </td>\n      </tr>\n    );\n    function handleInput(e: any) {\n      setGuesses((prev) => {\n        const next = [...prev];\n        next[index] = e.target.value;\n        return next;\n      });\n    }\n  }\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport { Container } from \"reactstrap\";\nimport ManageView from \"./pages/Manage\";\nimport StartMenu from \"./pages/Start\";\nimport Play from \"./pages/Play\";\n\nexport function AppRoot() {\n  return (\n    <Container fluid className=\"bg-teal h-100 mh-100 \">\n      <Switch>\n        <Route path=\"/start\">\n          <StartMenu />\n        </Route>\n        <Route path=\"/play/:gameId?\">\n          <Play />\n        </Route>\n        <Route path=\"/manage\">\n          <ManageView />\n        </Route>\n        <Route>\n          <Redirect to=\"/start\" />\n        </Route>\n      </Switch>\n    </Container>\n  );\n}\n\nexport default AppRoot;\n","export type UserData = {email:string, picture: string};\nlet userData: UserData | undefined;\n\nexport function getUserData(): UserData {\n  if(userData) return userData;\n\n  const cookies = document.cookie?.split('; ');\n  const jwtCookie = cookies.find(it => it.startsWith('JWT='));\n\n  // This will only be null in development mode if not-authed\n  // or if something has gone horribly wrong in production.\n  if(!jwtCookie) return null as any\n\n  const {email, picture} = JSON.parse(atob(jwtCookie.split('.')[1]));\n  userData = {email, picture};\n  return userData;\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport App from \"./App\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { getUserData } from \"./util/auth\";\nimport { Container } from \"reactstrap\";\n\nif (!getUserData()) {\n  window.location.assign(\"/auth/login\");\n} else {\n  ReactDOM.render(\n    <React.StrictMode>\n      <Container fluid className=\"bg-teal mh-100\">\n        <Router>\n          <App />\n        </Router>\n      </Container>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}