{"version":3,"sources":["util/auth.ts","component/RebusPuzzle.tsx","pages/Manage.tsx","img/CW-logo-2021-NAVY.png","pages/Start.tsx","pages/Play.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["userData","RebusPuzzle","puzzle","parts","items","regex","lastEnd","match","exec","shortName","image","getEmojiUrl","index","push","text","slice","lastIndex","length","parseRebus","map","it","ndx","src","alt","title","className","emojiCustom","emojiApple","getUserData","jwtCookie","document","cookie","split","find","startsWith","JSON","parse","atob","email","picture","ManageView","Row","xs","Col","RebusJumbotron","to","useState","data","setData","useFetch","get","post","del","error","useEffect","then","message","Jumbotron","RebusTable","puzzles","onDelete","rebus","prev","filter","RebusInput","onUpdate","Table","RebusRow","solution","contributor","hint","replace","onClick","style","color","cursor","props","setPuzzle","setSolution","setHint","display","flexDirection","alignItems","FormGroup","Label","Input","value","onChange","e","currentTarget","marginLeft","marginRight","marginTop","marginBottom","placeholder","Button","StartMenu","navyLogo","tag","Link","href","PlayPage","gameId","useParams","PlayGame","Date","getTime","guesses","setGuesses","encodeURIComponent","loading","hackingDetected","setHackingDetected","doSave","useCallback","flushedGuesses","a","stringify","newData","useAutosave","onSave","interval","doMarkHacker","arg","hacker","devtools","isOpen","fn","event","detail","window","addEventListener","removeEventListener","guess","soln","solutions","backgroundColor","toLowerCase","onInput","handleInput","next","target","renderRow","AppRoot","Container","fluid","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","getElementById","location","assign"],"mappings":"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","file":"static/js/main.af62431b.chunk.js","sourcesContent":["export type UserData = {email:string, picture: string};\nlet userData: UserData | undefined;\n\nexport function getUserData(): UserData {\n  if(userData) return userData;\n\n  const cookies = document.cookie?.split('; ');\n  const jwtCookie = cookies.find(it => it.startsWith('JWT='));\n\n  // This will only be null in development mode if not-authed\n  // or if something has gone horribly wrong in production.\n  if(!jwtCookie) return null as any\n\n  const {email, picture} = JSON.parse(atob(jwtCookie.split('.')[1]));\n  userData = {email, picture};\n  return userData;\n}\n","import React from \"react\";\nimport emojiApple from '../static/emoji-apple.json';\nimport emojiCustom from '../static/emoji-custom.json';\n\nexport function RebusPuzzle({puzzle}: {puzzle: string}){\n  const parts = parseRebus(puzzle).map((it, ndx) =>\n    \"text\" in it ? (\n      <span key={ndx}>{it.text}</span>\n    ) : (\n      <img key={ndx} src={it.image} alt={it.shortName} title={it.shortName}/>\n    )\n  );\n\n  return (<p className=\"rebus\" title={puzzle}>{parts}</p>)\n}\n\ntype RebusDatum = { text: string } | { image: string; shortName: string };\n\nfunction parseRebus(puzzle: string): RebusDatum[] {\n  let items: RebusDatum[] = [];\n\n  const regex = /:([^:]+):/g;\n  let lastEnd = 0;\n  while (true) {\n    const match = regex.exec(puzzle);\n    if (!match) break;\n\n    const shortName = match[1];\n    const image = getEmojiUrl(shortName);\n    if (!image) continue;\n\n    if (match.index !== lastEnd) {\n      items.push({text: puzzle.slice(lastEnd, match.index)});\n    }\n    items.push({image, shortName})\n    lastEnd = regex.lastIndex;\n  }\n  if (lastEnd !== puzzle.length) {\n    items.push({text: puzzle.slice(lastEnd)});\n  }\n\n  return items;\n}\n\n\n\nexport function getEmojiUrl(shortName: string): string | undefined {\n  //@ts-ignore these are lookup maps, not strongly typed json objects\n  return emojiCustom[shortName] ?? emojiApple[shortName];\n}\n\n\n","import React, {useEffect, useState} from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Col,\n  Jumbotron,\n  Row,\n  Input,\n  Button,\n  FormGroup,\n  Label,\n  Table,\n} from \"reactstrap\";\nimport useFetch from \"use-http\";\nimport { RebusPuzzle } from \"../component/RebusPuzzle\";\nimport {getUserData} from \"../util/auth\";\n\nexport default function ManageView() {\n  return (\n    <>\n      <Row className=\"py-4 mx-2 mt-4\" xs={2}>\n        <Col xs={2} />\n        <Col className=\"px-4 mx-2 text-center\" xs={8}>\n          <h1>Outschool Rebus Puzzles: Management</h1>\n        </Col>\n        <Col xs={2} />\n      </Row>\n      <Row className=\"py-2 mx-2\">\n        <Col>\n          <RebusJumbotron />\n        </Col>\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col className=\"px-4 mx-2\">\n          <Link className=\"btn btn-secondary\" to=\"/start\">\n            Back to Start Page\n          </Link>\n        </Col>\n      </Row>\n    </>\n  );\n}\n\ntype IRebus = {\n  puzzle: string;\n  solution: string;\n  hint: string;\n  contributor: string;\n};\n\nfunction RebusJumbotron() {\n  const [data, setData] = useState<IRebus[]>([]);\n  const { get, post, del, error } = useFetch<IRebus[]>(\"/api/rebus\");\n\n  useEffect(()=>{\n    get().then(setData);\n  }, [])\n\n  function handleDelete(rebus: IRebus) {\n    del({ puzzle: rebus.puzzle });\n    setData(prev=> prev.filter(it=> it.puzzle !== rebus.puzzle))\n  }\n  function handleUpdate(rebus: IRebus){\n    post(rebus)\n    setData(prev=> [...prev, rebus]);\n  }\n\n  if (error) return <div>Error: {error.message ?? error}</div>;\n  if (!data.length) return <div>Loading...</div>;\n\n  return (\n    <Jumbotron className=\"m-4 p-4 bg-mango rounded\">\n      <RebusTable puzzles={data} onDelete={handleDelete} />\n      <hr />\n      <RebusInput onUpdate={handleUpdate}/>\n    </Jumbotron>\n  )\n}\n\nfunction RebusTable({\n  puzzles,\n  onDelete,\n}: {\n  puzzles: IRebus[];\n  onDelete?: (rebus: IRebus) => void;\n}) {\n  return (\n    <Table>\n      <thead>\n        <tr>\n          <th>Rebus</th>\n          <th>Solution</th>\n\n          <th>Hint</th>\n          {!!onDelete && <th>Owner</th>}\n        </tr>\n      </thead>\n      <tbody>\n        {puzzles.map((it) => (\n          <RebusRow key={it.puzzle} rebus={it} onDelete={onDelete} />\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n\nfunction RebusRow({\n  rebus,\n  onDelete,\n}: {\n  rebus: IRebus;\n  onDelete?: (rebus: IRebus) => void;\n}) {\n  function handleDelete() {\n    onDelete && onDelete(rebus);\n  }\n\n  return (\n    <tr>\n      <td>\n        <RebusPuzzle puzzle={rebus.puzzle} />\n      </td>\n      <td>{rebus.solution}</td>\n      <td title={rebus.contributor}>{rebus.hint ? rebus.hint : \"No hints!\"}</td>\n      {onDelete && (\n        <>\n          <td title={rebus.contributor}>\n            {rebus.contributor.replace(\"@outschool.com\", \"\")}\n          </td>\n          <td>\n            <span\n              onClick={handleDelete}\n              style={{ color: \"red\", cursor: \"pointer\" }}\n            >\n              X\n            </span>\n          </td>\n        </>\n      )}\n    </tr>\n  );\n}\n\nfunction RebusInput(props: { onUpdate: (r: IRebus) => void }) {\n  const [puzzle, setPuzzle] = useState(\"\");\n  const [solution, setSolution] = useState(\"\");\n  const [hint, setHint] = useState(\"\");\n  const contributor = getUserData().email;\n\n  function handlePuzzleChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    setPuzzle(e.currentTarget.value);\n  }\n\n  function handleSolutionChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    setSolution(e.currentTarget.value);\n  }\n\n  function handleHintChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    setHint(e.currentTarget.value);\n  }\n\n  function handleSave() {\n    if (!solution || !hint || !puzzle) return;\n    props.onUpdate({ puzzle, solution, hint, contributor });\n    setPuzzle(\"\");\n    setSolution(\"\");\n    setHint(\"\");\n  }\n\n  return (\n    <div>\n      {(puzzle.length > 0 || solution.length > 0) && (\n        <RebusTable\n          puzzles={[{ puzzle, solution, hint, contributor }]}\n        />\n      )}\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"flex-end\",\n        }}\n      >\n        <FormGroup>\n          <Label>Puzzle</Label>\n          <Input value={puzzle} onChange={handlePuzzleChange} />\n        </FormGroup>\n        <div\n          style={{\n            marginLeft: \"10px\",\n            marginRight: \"10px\",\n            marginTop: \"auto\",\n            marginBottom: \"10px\",\n          }}\n        >\n          =\n        </div>\n        <FormGroup>\n          <Label>Solution</Label>\n          <Input\n            value={solution}\n            onChange={handleSolutionChange}\n            placeholder=\"Larry\"\n          />\n        </FormGroup>\n        <FormGroup style={{ marginLeft: \"20px\" }}>\n          <Label>Hint</Label>\n          <Input\n            value={hint}\n            onChange={handleHintChange}\n            placeholder=\"Learner Pod\"\n          />\n        </FormGroup>\n        <Button\n          style={{ marginTop: \"auto\", marginLeft: \"20px\" }}\n          onClick={handleSave}\n        >\n          Save\n        </Button>\n      </div>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/CW-logo-2021-NAVY.1aaec414.png\";","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Button, Col, Jumbotron, Row } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport navyLogo from \"../img/CW-logo-2021-NAVY.png\";\n\nexport default function StartMenu() {\n  return (\n    <>\n      <Row className=\"py-4 mx-2\" xs={3}>\n        <Col xs={4} />\n        <Col className=\"px-4 mx-2\" xs={4}>\n          <img\n            className=\"img-fluid\"\n            src={navyLogo}\n            alt=\"Cupcake Week 2021 boombox logo\"\n          />\n        </Col>\n        <Col xs={4} />\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col>\n          <Jumbotron className=\"m-4 p-4 bg-mango rounded\">\n            <h1>Outschool Rebus Puzzles</h1>\n            <p className=\"lead\">\n              Challenge your friends and coworkers to some good-natured\n              competition.\n            </p>\n            <hr className=\"my-2\" />\n            <p>Start a game below</p>\n            <p className=\"lead\">\n              <Button tag={Link} color=\"primary\" to=\"/play\">\n                Play!\n              </Button>\n            </p>\n\n            <p>Or add/delete rebus puzzles:</p>\n            <p className=\"lead\">\n              <Button tag={Link} color=\"primary\" to=\"/manage\">\n                Manage!\n              </Button>\n            </p>\n          </Jumbotron>\n        </Col>\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col className=\"px-4 mx-2 float-sm-right\" xs={2}>\n          <Button className=\"btn-blurple\" href=\"/auth/logout\">\n            Logout\n          </Button>\n        </Col>\n      </Row>\n    </>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Link, Redirect, useParams } from \"react-router-dom\";\nimport { Button, Col, Jumbotron, Row, Table } from \"reactstrap\";\nimport { RebusPuzzle } from \"../component/RebusPuzzle\";\nimport useFetch from \"use-http\";\nimport { useAutosave } from \"react-autosave\";\nimport devtools from \"devtools-detect\";\nexport default function PlayPage() {\n  const { gameId } = useParams<{ gameId?: string }>();\n  if (!gameId) {\n    return <Redirect to={`/play/${new Date().getTime()}`} />;\n  }\n\n  return (\n    <>\n      <Row className=\"py-4 mx-2 mt-4\" xs={2}>\n        <Col xs={2} />\n        <Col className=\"px-4 mx-2 text-center \" xs={8}>\n          <h1 className=\"blurple\">Outschool Rebus Puzzles: Play!</h1>\n        </Col>\n        <Col xs={2} />\n      </Row>\n      <Row className=\"py-2 mx-2\">\n        <Col>\n          <Jumbotron className=\"m-4 p-4 bg-mango rounded\">\n            <PlayGame gameId={gameId} />\n          </Jumbotron>\n        </Col>\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col className=\"px-4 mx-2\">\n          <Link className=\"btn btn-secondary\" to=\"/start\">\n            Back to Start Page\n          </Link>\n        </Col>\n      </Row>\n    </>\n  );\n}\nconst IS_DEVMODE =\n  !process.env.NODE_ENV || process.env.NODE_ENV === \"development\";\n\ntype GameData = {\n  id: string;\n  email: string;\n  puzzles: string[];\n  solutions: string[];\n  guesses: string[];\n  hints: string[];\n  hacker: boolean;\n};\nfunction PlayGame(props: { gameId: string }) {\n  const [guesses, setGuesses] = useState<string[]>([]);\n  const { get, post, data, loading, error } = useFetch<GameData>(\n    `/api/game?id=${encodeURIComponent(props.gameId)}`\n  );\n  const [hackingDetected, setHackingDetected] = useState(false);\n\n  const doSave = useCallback(\n    async (flushedGuesses: string[]) => {\n      if (!flushedGuesses.length) return;\n      if (JSON.stringify(data?.guesses) === JSON.stringify(flushedGuesses))\n        return;\n\n      const newData = { ...data };\n      newData.guesses = flushedGuesses;\n      return post(newData);\n    },\n    [post, data]\n  );\n  useAutosave({ data: guesses, onSave: doSave, interval: 3000 });\n\n  const doMarkHacker = useCallback(\n    (arg?: boolean) => {\n      if (!arg && IS_DEVMODE) {\n        console.log(\n          \"you would have been marked a hacker, but this is development. You can call DO_MARK_HACKER from here to trigger this anyway.\"\n        );\n        return;\n      }\n      setHackingDetected(true);\n      const newData = { ...data };\n      newData.hacker = true;\n      post(newData);\n    },\n    [post, data]\n  );\n  useEffect(() => {\n    get();\n  }, []);\n  useEffect(() => {\n    if (!data) return;\n    if (IS_DEVMODE) {\n      (window as any).DO_MARK_HACKER = () => doMarkHacker(true);\n    }\n    setGuesses(data.guesses);\n    setHackingDetected(data.hacker);\n    if (!data.hacker && devtools.isOpen) {\n      doMarkHacker();\n    }\n  }, [data, doMarkHacker]);\n\n  useEffect(() => {\n    let fn = (event: any) => {\n      if (event.detail.isOpen) {\n        doMarkHacker();\n      }\n    };\n    window.addEventListener(\"devtoolschange\", fn);\n    return () => {\n      window.removeEventListener(\"devtoolschange\", fn);\n    };\n  }, [data, doMarkHacker]);\n\n  if (hackingDetected) {\n    return (\n      <div>\n        <p>\n          <img src=\"/mrresetti.png\" />\n        </p>\n        <p>NO! YOU CANNOT USE THE DEVTOOLS HERE! YOUR GAME IS NULL AND VOID.</p>\n      </div>\n    );\n  }\n\n  if (error) return <div>{error.message ?? error}</div>;\n  if (!data) return <div>Loading...</div>;\n\n  //TODO loading image when saving or when needing to save?\n  return (\n    <div className=\"mx-2 px-2\">\n      <Table>\n        <thead>\n          <tr>\n            <th>Rebus</th>\n            <th>Your Guess</th>\n          </tr>\n        </thead>\n        <tbody>{data.puzzles.map((it, ndx) => renderRow(ndx))}</tbody>\n      </Table>\n    </div>\n  );\n\n  function renderRow(index: number) {\n    const puzzle = data?.puzzles[index] ?? \"\";\n    const guess = guesses?.[index] ?? \"\";\n    const soln = data?.solutions[index] ?? \"\";\n\n    const backgroundColor =\n      guess.length === 0\n        ? \"#FFF\"\n        : soln.toLowerCase() === guess.toLowerCase()\n        ? \"#0F0\"\n        : \"#F44\";\n\n    return (\n      <tr key={puzzle}>\n        <td className=\"align-middle\">\n          <RebusPuzzle puzzle={puzzle} />\n        </td>\n        <td className=\"align-middle\">\n          <input\n            value={guess}\n            onInput={handleInput}\n            style={{ backgroundColor }}\n          />\n        </td>\n      </tr>\n    );\n    function handleInput(e: any) {\n      setGuesses((prev) => {\n        const next = [...prev];\n        next[index] = e.target.value;\n        return next;\n      });\n    }\n  }\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport { Container } from \"reactstrap\";\nimport ManageView from \"./pages/Manage\";\nimport StartMenu from \"./pages/Start\";\nimport Play from \"./pages/Play\";\n\nexport function AppRoot() {\n  return (\n    <Container fluid className=\"bg-teal h-100 mh-100 \">\n      <Switch>\n        <Route path=\"/start\">\n          <StartMenu />\n        </Route>\n        <Route path=\"/play/:gameId?\">\n          <Play />\n        </Route>\n        <Route path=\"/manage\">\n          <ManageView />\n        </Route>\n        <Route>\n          <Redirect to=\"/start\" />\n        </Route>\n      </Switch>\n    </Container>\n  );\n}\n\nexport default AppRoot;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport App from \"./App\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { getUserData } from \"./util/auth\";\nimport { Container } from \"reactstrap\";\n\nif (!getUserData()) {\n  window.location.assign(\"/auth/login\");\n} else {\n  ReactDOM.render(\n    <React.StrictMode>\n      <Container fluid className=\"bg-teal mh-100\">\n        <Router>\n          <App />\n        </Router>\n      </Container>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}