{"version":3,"sources":["util/auth.ts","component/RebusPuzzle.tsx","pages/Manage.tsx","img/CW-logo-2021-NAVY.png","pages/Start.tsx","pages/Play.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["userData","RebusPuzzle","puzzle","parts","items","regex","lastEnd","match","exec","shortName","image","getEmojiUrl","index","push","text","slice","lastIndex","length","parseRebus","map","it","ndx","src","alt","title","className","emojiCustom","emojiApple","getUserData","jwtCookie","document","cookie","split","find","startsWith","JSON","parse","atob","email","picture","ManageView","Row","xs","Col","RebusJumbotron","to","useState","data","setData","useFetch","get","post","del","error","selectedPuzzle","setSeletectedPuzzle","useEffect","then","message","Jumbotron","RebusTable","puzzles","showContributor","onDelete","rebus","prev","filter","onSelect","RebusInput","onUpdate","selected","Table","RebusRow","canEdit","contributor","solution","hint","replace","onClick","style","color","cursor","Button","setPuzzle","setSolution","setHint","display","flexDirection","alignItems","FormGroup","Label","Input","value","onChange","e","currentTarget","disabled","marginLeft","marginRight","marginTop","marginBottom","placeholder","StartMenu","navyLogo","tag","Link","href","PlayPage","gameId","useParams","PlayGame","Date","getTime","props","guesses","setGuesses","encodeURIComponent","loading","hackingDetected","setHackingDetected","doSave","useCallback","flushedGuesses","a","stringify","newData","useAutosave","onSave","interval","doMarkHacker","arg","hacker","devtools","isOpen","fn","event","detail","window","addEventListener","removeEventListener","guess","soln","solutions","hints","backgroundColor","toLowerCase","onInput","handleInput","next","target","renderRow","AppRoot","Container","fluid","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","App","getElementById","location","assign"],"mappings":"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","file":"static/js/main.aec51f6f.chunk.js","sourcesContent":["export type UserData = {email:string, picture: string};\nlet userData: UserData | undefined;\n\nexport function getUserData(): UserData {\n  if(userData) return userData;\n\n  const cookies = document.cookie?.split('; ');\n  const jwtCookie = cookies.find(it => it.startsWith('JWT='));\n\n  // This will only be null in development mode if not-authed\n  // or if something has gone horribly wrong in production.\n  if(!jwtCookie) return null as any\n\n  const {email, picture} = JSON.parse(atob(jwtCookie.split('.')[1]));\n  userData = {email, picture};\n  return userData;\n}\n","import React from \"react\";\nimport emojiApple from '../static/emoji-apple.json';\nimport emojiCustom from '../static/emoji-custom.json';\n\nexport function RebusPuzzle({puzzle}: {puzzle: string}){\n  const parts = parseRebus(puzzle).map((it, ndx) =>\n    \"text\" in it ? (\n      <span key={ndx}>{it.text}</span>\n    ) : (\n      <img key={ndx} src={it.image} alt={it.shortName} title={it.shortName}/>\n    )\n  );\n\n  return (<p className=\"rebus\" title={puzzle}>{parts}</p>)\n}\n\ntype RebusDatum = { text: string } | { image: string; shortName: string };\n\nfunction parseRebus(puzzle: string): RebusDatum[] {\n  let items: RebusDatum[] = [];\n\n  const regex = /:([^:]+):/g;\n  let lastEnd = 0;\n  while (true) {\n    const match = regex.exec(puzzle);\n    if (!match) break;\n\n    const shortName = match[1];\n    const image = getEmojiUrl(shortName);\n    if (!image) continue;\n\n    if (match.index !== lastEnd) {\n      items.push({text: puzzle.slice(lastEnd, match.index)});\n    }\n    items.push({image, shortName})\n    lastEnd = regex.lastIndex;\n  }\n  if (lastEnd !== puzzle.length) {\n    items.push({text: puzzle.slice(lastEnd)});\n  }\n\n  return items;\n}\n\n\n\nexport function getEmojiUrl(shortName: string): string | undefined {\n  //@ts-ignore these are lookup maps, not strongly typed json objects\n  return emojiCustom[shortName] ?? emojiApple[shortName];\n}\n\n\n","import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Col,\n  Jumbotron,\n  Row,\n  Input,\n  Button,\n  FormGroup,\n  Label,\n  Table,\n} from \"reactstrap\";\nimport useFetch from \"use-http\";\nimport { RebusPuzzle } from \"../component/RebusPuzzle\";\nimport { getUserData } from \"../util/auth\";\n\nexport default function ManageView() {\n  return (\n    <>\n      <Row className=\"py-4 mx-2 mt-4\" xs={2}>\n        <Col xs={2} />\n        <Col className=\"px-4 mx-2 text-center\" xs={8}>\n          <h1>Outschool Rebus Puzzles: Management</h1>\n        </Col>\n        <Col xs={2} />\n      </Row>\n      <Row className=\"py-2 mx-2\">\n        <Col>\n          <RebusJumbotron />\n        </Col>\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col className=\"px-4 mx-2\">\n          <Link className=\"btn btn-blurple\" to=\"/start\">\n            Back to Start Page\n          </Link>\n        </Col>\n      </Row>\n    </>\n  );\n}\n\ntype IRebus = {\n  puzzle: string;\n  solution: string;\n  hint: string;\n  contributor: string;\n};\n\nfunction RebusJumbotron() {\n  const [data, setData] = useState<IRebus[]>([]);\n  const { get, post, del, error } = useFetch<IRebus[]>(\"/api/rebus\");\n  const [selectedPuzzle, setSeletectedPuzzle] = useState<IRebus | null>(null);\n\n  useEffect(() => {\n    get().then(setData);\n  }, [get]);\n\n  function handleDelete(rebus: IRebus) {\n    del({ puzzle: rebus.puzzle });\n    setData((prev) => prev.filter((it) => it.puzzle !== rebus.puzzle));\n  }\n  function handleUpdate(rebus: IRebus) {\n    post(rebus);\n    setSeletectedPuzzle(null);\n    setData((prev) => [...prev, rebus]);\n  }\n  function handleSelect(rebus: IRebus) {\n    setSeletectedPuzzle(rebus);\n  }\n\n  if (error) return <div>Error: {error.message ?? error}</div>;\n  if (!data.length) return <div>Loading...</div>;\n\n  return (\n    <Jumbotron className=\"m-4 p-4 bg-mango rounded\">\n      <RebusTable\n        puzzles={data}\n        showContributor\n        onDelete={handleDelete}\n        onSelect={handleSelect}\n      />\n      <hr />\n      <RebusInput onUpdate={handleUpdate} selected={selectedPuzzle} />\n    </Jumbotron>\n  );\n}\n\nfunction RebusTable({\n  puzzles,\n  showContributor,\n  onDelete,\n  onSelect,\n}: {\n  puzzles: IRebus[];\n  showContributor?: boolean;\n  onDelete?: (rebus: IRebus) => void;\n  onSelect?: (rebus: IRebus) => void;\n}) {\n  return (\n    <Table>\n      <thead>\n        <tr>\n          <th>Rebus</th>\n          <th>Solution</th>\n\n          <th>Hint</th>\n          {showContributor && <th>Owner</th>}\n          <th />\n          <th />\n        </tr>\n      </thead>\n      <tbody>\n        {puzzles.map((it) => (\n          <RebusRow\n            key={it.puzzle}\n            rebus={it}\n            showContributor={showContributor}\n            onDelete={onDelete}\n            onSelect={onSelect}\n          />\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n\nfunction RebusRow({\n  rebus,\n  showContributor,\n  onDelete,\n  onSelect,\n}: {\n  rebus: IRebus;\n  showContributor?: boolean;\n  onDelete?: (rebus: IRebus) => void;\n  onSelect?: (rebus: IRebus) => void;\n}) {\n  function handleDelete() {\n    onDelete && onDelete(rebus);\n  }\n\n  function handleClick() {\n    onSelect && onSelect(rebus);\n  }\n\n  const canEdit = rebus.contributor === getUserData().email;\n\n  return (\n    <tr>\n      <td>\n        <RebusPuzzle puzzle={rebus.puzzle} />\n      </td>\n      <td>{rebus.solution}</td>\n      <td>{rebus.hint ? rebus.hint : \"No hints!\"}</td>\n      {showContributor && (\n        <td title={rebus.contributor}>\n          {rebus.contributor.replace(\"@outschool.com\", \"\")}\n        </td>\n      )}\n      <td>\n        {canEdit && (\n          <span\n            onClick={handleDelete}\n            style={{ color: \"red\", cursor: \"pointer\" }}\n          >\n            X\n          </span>\n        )}\n      </td>\n      <td>{canEdit && <Button onClick={handleClick}>Edit</Button>}</td>\n    </tr>\n  );\n}\n\nfunction RebusInput({\n  selected,\n  onUpdate,\n}: {\n  selected: IRebus | null;\n  onUpdate: (r: IRebus) => void;\n}) {\n  const [puzzle, setPuzzle] = useState(\"\");\n  const [solution, setSolution] = useState(\"\");\n  const [hint, setHint] = useState(\"\");\n  const contributor = getUserData().email;\n\n  useEffect(() => {\n    if (selected) {\n      setPuzzle(selected.puzzle);\n      setSolution(selected.solution);\n      setHint(selected.hint);\n    } else {\n      setPuzzle(\"\");\n      setSolution(\"\");\n      setHint(\"\");\n    }\n  }, [selected]);\n\n  function handlePuzzleChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    setPuzzle(e.currentTarget.value);\n  }\n\n  function handleSolutionChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    setSolution(e.currentTarget.value);\n  }\n\n  function handleHintChange(e: React.SyntheticEvent<HTMLInputElement>) {\n    setHint(e.currentTarget.value);\n  }\n\n  function handleSave() {\n    if (!solution || !hint || !puzzle) return;\n    onUpdate({ puzzle, solution, hint, contributor });\n    setPuzzle(\"\");\n    setSolution(\"\");\n    setHint(\"\");\n  }\n\n  return (\n    <div>\n      {(puzzle.length > 0 || solution.length > 0) && (\n        <RebusTable puzzles={[{ puzzle, solution, hint, contributor }]} />\n      )}\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"flex-end\",\n        }}\n      >\n        <FormGroup>\n          <Label>Puzzle</Label>\n          <Input\n            value={puzzle}\n            onChange={handlePuzzleChange}\n            disabled={!!selected}\n          />\n        </FormGroup>\n        <div\n          style={{\n            marginLeft: \"10px\",\n            marginRight: \"10px\",\n            marginTop: \"auto\",\n            marginBottom: \"10px\",\n          }}\n        >\n          =\n        </div>\n        <FormGroup>\n          <Label>Solution</Label>\n          <Input\n            value={solution}\n            onChange={handleSolutionChange}\n            placeholder=\"Larry\"\n          />\n        </FormGroup>\n        <FormGroup style={{ marginLeft: \"20px\" }}>\n          <Label>Hint</Label>\n          <Input\n            value={hint}\n            onChange={handleHintChange}\n            placeholder=\"Learner Pod\"\n          />\n        </FormGroup>\n        <Button\n          className=\"btn-blurple\"\n          style={{ marginTop: \"auto\", marginLeft: \"20px\" }}\n          onClick={handleSave}\n        >\n          Save\n        </Button>\n      </div>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/CW-logo-2021-NAVY.1aaec414.png\";","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Button, Col, Jumbotron, Row } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport navyLogo from \"../img/CW-logo-2021-NAVY.png\";\n\nexport default function StartMenu() {\n  return (\n    <>\n      <Row className=\"py-4 mx-2\" xs={3}>\n        <Col xs={4} />\n        <Col className=\"px-4 mx-2\" xs={4}>\n          <img\n            className=\"img-fluid\"\n            src={navyLogo}\n            alt=\"Cupcake Week 2021 boombox logo\"\n          />\n        </Col>\n        <Col xs={4} />\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col>\n          <Jumbotron className=\"m-4 p-4 bg-mango rounded\">\n            <h1>Outschool Rebus Puzzles</h1>\n            <p className=\"lead\">\n              Challenge your friends and coworkers to some good-natured\n              competition.\n            </p>\n            <hr className=\"my-2\" />\n            <p>Start a game below</p>\n            <p className=\"lead\">\n              <Button tag={Link} color=\"blurple\" to=\"/play\">\n                Play!\n              </Button>\n            </p>\n\n            <p>Or add/delete rebus puzzles:</p>\n            <p className=\"lead\">\n              <Button tag={Link} color=\"blurple\" to=\"/manage\">\n                Manage!\n              </Button>\n            </p>\n          </Jumbotron>\n        </Col>\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col className=\"px-4 mx-2 float-sm-right\" xs={2}>\n          <Button className=\"btn-blurple\" href=\"/auth/logout\">\n            Logout\n          </Button>\n        </Col>\n      </Row>\n    </>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Link, Redirect, useParams } from \"react-router-dom\";\nimport { Button, Col, Jumbotron, Row, Table } from \"reactstrap\";\nimport { RebusPuzzle } from \"../component/RebusPuzzle\";\nimport useFetch from \"use-http\";\nimport { useAutosave } from \"react-autosave\";\nimport devtools from \"devtools-detect\";\nexport default function PlayPage() {\n  const { gameId } = useParams<{ gameId?: string }>();\n  if (!gameId) {\n    return <Redirect to={`/play/${new Date().getTime()}`} />;\n  }\n\n  return (\n    <>\n      <Row className=\"py-4 mx-2 mt-4\" xs={2}>\n        <Col xs={2} />\n        <Col className=\"px-4 mx-2 text-center \" xs={8}>\n          <h1 className=\"blurple\">Outschool Rebus Puzzles: Play!</h1>\n        </Col>\n        <Col xs={2} />\n      </Row>\n      <Row className=\"py-2 mx-2\">\n        <Col>\n          <Jumbotron className=\"m-4 p-4 bg-mango rounded\">\n            <PlayGame gameId={gameId} />\n          </Jumbotron>\n        </Col>\n      </Row>\n      <Row className=\"py-4 mx-2\">\n        <Col className=\"px-4 mx-2\">\n          <Link className=\"btn btn-blurple\" to=\"/start\">\n            Back to Start Page\n          </Link>\n        </Col>\n      </Row>\n    </>\n  );\n}\nconst IS_DEVMODE =\n  !process.env.NODE_ENV || process.env.NODE_ENV === \"development\";\n\ntype GameData = {\n  id: string;\n  email: string;\n  puzzles: string[];\n  solutions: string[];\n  guesses: string[];\n  hints: string[];\n  hacker: boolean;\n};\nfunction PlayGame(props: { gameId: string }) {\n  const [guesses, setGuesses] = useState<string[]>([]);\n  const { get, post, data, loading, error } = useFetch<GameData>(\n    `/api/game?id=${encodeURIComponent(props.gameId)}`\n  );\n  const [hackingDetected, setHackingDetected] = useState(false);\n\n  const doSave = useCallback(\n    async (flushedGuesses: string[]) => {\n      if (!flushedGuesses.length) return;\n      if (JSON.stringify(data?.guesses) === JSON.stringify(flushedGuesses))\n        return;\n\n      const newData = { ...data };\n      newData.guesses = flushedGuesses;\n      return post(newData);\n    },\n    [post, data]\n  );\n  useAutosave({ data: guesses, onSave: doSave, interval: 3000 });\n\n  const doMarkHacker = useCallback(\n    (arg?: boolean) => {\n      if (!arg && IS_DEVMODE) {\n        console.log(\n          \"you would have been marked a hacker, but this is development. You can call DO_MARK_HACKER from here to trigger this anyway.\"\n        );\n        return;\n      }\n      setHackingDetected(true);\n      const newData = { ...data };\n      newData.hacker = true;\n      post(newData);\n    },\n    [post, data]\n  );\n  useEffect(() => {\n    get();\n  }, []);\n  useEffect(() => {\n    if (!data) return;\n    if (IS_DEVMODE) {\n      (window as any).DO_MARK_HACKER = () => doMarkHacker(true);\n    }\n    setGuesses(data.guesses);\n    setHackingDetected(data.hacker);\n    if (!data.hacker && devtools.isOpen) {\n      doMarkHacker();\n    }\n  }, [data, doMarkHacker]);\n\n  useEffect(() => {\n    let fn = (event: any) => {\n      if (event.detail.isOpen) {\n        doMarkHacker();\n      }\n    };\n    window.addEventListener(\"devtoolschange\", fn);\n    return () => {\n      window.removeEventListener(\"devtoolschange\", fn);\n    };\n  }, [data, doMarkHacker]);\n\n  if (hackingDetected) {\n    return (\n      <div>\n        <p>\n          <img src=\"/mrresetti.png\" />\n        </p>\n        <p>NO! YOU CANNOT USE THE DEVTOOLS HERE! YOUR GAME IS NULL AND VOID.</p>\n      </div>\n    );\n  }\n\n  if (error) return <div>{error.message ?? error}</div>;\n  if (!data) return <div>Loading...</div>;\n\n  //TODO loading image when saving or when needing to save?\n  return (\n    <div className=\"mx-2 px-2\">\n      <Table>\n        <thead>\n          <tr>\n            <th>Rebus</th>\n            <th>Your Guess</th>\n            <th>Hint</th>\n          </tr>\n        </thead>\n        <tbody>{data.puzzles.map((it, ndx) => renderRow(ndx))}</tbody>\n      </Table>\n    </div>\n  );\n\n  function renderRow(index: number) {\n    const puzzle = data?.puzzles[index] ?? \"\";\n    const guess = guesses?.[index] ?? \"\";\n    const soln = data?.solutions[index] ?? \"\";\n    const hint = data?.hints?.[index] ?? \"\";\n\n    const backgroundColor =\n      guess.length === 0\n        ? \"#FFF\"\n        : soln.toLowerCase() === guess.toLowerCase()\n        ? \"#0F0\"\n        : \"#F44\";\n\n    return (\n      <tr key={puzzle}>\n        <td className=\"align-middle\">\n          <div className=\"bg-rebus rounded p-1\">\n            <RebusPuzzle puzzle={puzzle} />\n          </div>\n        </td>\n        <td className=\"align-middle\">\n          <input\n            className=\"p-1\"\n            value={guess}\n            onInput={handleInput}\n            style={{ backgroundColor }}\n          />\n        </td>\n        <td className=\"align-middle\">\n          <p className=\"p-1\">{hint}</p>\n        </td>\n      </tr>\n    );\n    function handleInput(e: any) {\n      setGuesses((prev) => {\n        const next = [...prev];\n        next[index] = e.target.value;\n        return next;\n      });\n    }\n  }\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport { Container } from \"reactstrap\";\nimport ManageView from \"./pages/Manage\";\nimport StartMenu from \"./pages/Start\";\nimport Play from \"./pages/Play\";\n\nexport function AppRoot() {\n  return (\n    <Container fluid className=\"bg-teal h-100 mh-100 \">\n      <Switch>\n        <Route path=\"/start\">\n          <StartMenu />\n        </Route>\n        <Route path=\"/play/:gameId?\">\n          <Play />\n        </Route>\n        <Route path=\"/manage\">\n          <ManageView />\n        </Route>\n        <Route>\n          <Redirect to=\"/start\" />\n        </Route>\n      </Switch>\n    </Container>\n  );\n}\n\nexport default AppRoot;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport App from \"./App\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { getUserData } from \"./util/auth\";\nimport { Container } from \"reactstrap\";\n\nif (!getUserData()) {\n  window.location.assign(\"/auth/login\");\n} else {\n  ReactDOM.render(\n    <React.StrictMode>\n      <Container fluid className=\"bg-teal mh-100\">\n        <Router>\n          <App />\n        </Router>\n      </Container>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}